# Анализ эффективности рекламных кампаний в digital-маркетинге с использованием Python

## Цель задания
Провести полный цикл анализа данных цифрового маркетинга, используя библиотеки **Python** (Pandas, Scikit-learn, Matplotlib/Seaborn) для обработки данных, анализа временных рядов, сегментации и визуализации. Задание фокусируется на оценке эффективности кампаний, выявлении паттернов поведения пользователей и создании инструментов для маркетинговой аналитики.

## Набор данных
*   **Рекомендуемый подход**: Создание синтетического датасета, имитирующего данные из нескольких источников цифрового маркетинга.
*   **Таблицы для генерации**:
    *   `campaign_performance`: Дата, Кампания, Канал (Facebook, Google_Search, Instagram), Показы, Клики, Расходы, Конверсии.
    *   `user_journey`: Анонимный User_ID, последовательность точек касания (touchpoints) с таймстемпами, итоговая конверсия.
    *   `crm_data`: Лиды (Lead_ID, Дата создания, Источник, Статус, Дата конвертации в клиента).
*   **Описание**: Данные должны отражать многоканальные маркетинговые активности, пути пользователей и жизненный цикл клиентов.

## Гипотезы для проверки
1.  Эффективность канала (например, Cost per Acquisition - CPA) имеет выраженную недельную сезонность, причем разные каналы имеют разные оптимальные дни для конверсий.
2.  Использование моделей атрибуции, учитывающих всю цепочку касаний, по сравнению с Last-Click, существенно перераспределяет вклад между каналами.
3.  Анализ паттернов клиентских путей позволяет выделить 3-4 кластера типичного поведения, каждый с характерной конверсией.
4.  Существуют устойчивые комбинации каналов в пути пользователя (например, "Поиск -> Социальные сети -> Прямой заход"), которые ассоциированы с высокой конверсией.
5.  Показатели эффективности кампаний (CTR, Conversion Rate) коррелируют с временными факторами (час дня, день недели) и бюджетом.

## Этапы выполнения

### Этап 1. Генерация, интеграция и расчет метрик
**Требования**:
1.  Сгенерируйте синтетический датасет, отражающий маркетинговые активность за 6-12 месяцев:
    *   Используйте библиотеки `numpy` и `pandas` для создания взаимосвязанных таблиц.
    *   Имитируйте реалистичные паттерны: сезонность, разные профили каналов, вариативность поведения пользователей.
2.  Объедините данные для сквозного анализа:
    *   Свяжите `campaign_performance` и `crm_data` для расчета метрик на уровне клиента (например, Customer Lifetime Value - LTV).
3.  Рассчитайте ключевые маркетинговые метрики:
    *   CTR (Click-Through Rate) = Клики / Показы.
    *   CPA (Cost per Acquisition) = Расходы / Конверсии.
    *   Conversion Rate = Конверсии / Клики.
    *   ROAS (Return on Ad Spend) = Доход / Расходы (если данные о доходе доступны).

### Этап 2. Временной анализ, атрибуция и проверка гипотез 1, 2, 5
Для проверки гипотез сформируйте следующие визуализации с помощью **Matplotlib/Seaborn**. К каждому графику приложите краткий вывод.

| № гипотезы | Визуализация | Тип графика и библиотеки | Проверяемая гипотеза |
| :--- | :--- | :--- | :--- |
| 1 | Сезонность CPA по каналам | **Многослойный линейный график:** Средний CPA по дням недели, отдельные линии для каждого канала. Используйте Seaborn `lineplot`. | Недельная сезонность эффективности каналов |
| 2 | Сравнение моделей атрибуции | **Сгруппированная столбчатая диаграмма:** Распределение "кредита" конверсии по каналам для моделей Last-Click, Linear, Time Decay (реализовать упрощенно). Используйте Matplotlib. | Влияние модели атрибуции на оценку каналов |
| 5 | Зависимость CTR от времени | **Тепловая карта (Heatmap):** Средний CTR по часам дня (ось X) и дням недели (ось Y). Используйте Seaborn `heatmap`. | Корреляция CTR с временными факторами |

### Этап 3. Анализ путей пользователей и прогнозирование (Гипотезы 3, 4)
**Требования**:
1.  **Подготовка данных о путях**:
    *   Преобразуйте данные `user_journey` в формат, пригодный для анализа (например, список последовательностей каналов).
    *   Рассчитайте базовые характеристики путей: длина, уникальные каналы, наличие конверсии.
2.  **Кластеризация путей (Гипотеза 3)**:
    *   Используйте методы векторного представления (например, "one-hot" кодирование для последовательностей фиксированной длины).
    *   Примените алгоритм кластеризации (K-Means) для выявления типичных паттернов.
    *   Проанализируйте и опишите кластеры: средняя длина, типичные каналы, конверсионность.
3.  **Анализ эффективных комбинаций каналов (Гипотеза 4)**:
    *   Определите наиболее частые комбинации каналов (например, пары, тройки) в путях, завершившихся конверсией.
    *   Сравните их конверсионность с другими комбинациями или с путями без конверсии.
4.  **Прогнозирование ключевых метрик (опционально)**:
    *   Для данных `campaign_performance` постройте простую модель прогнозирования (например, с использованием линейной регрессии или Prophet) для ключевых метрик (Клики, Конверсии) на ближайший месяц.

### Этап 4. Создание комплексного аналитического отчета
Создайте структурированный отчет, объединяющий все этапы анализа.
*   Используйте Jupyter Notebook для последовательного выполнения всех шагов.
*   Организуйте отчет: цели, описание данных, визуализация с выводами по гипотезам, результаты кластеризации и анализа путей, практические рекомендации.
*   **Расширенная задача (с использованием `ipywidgets`)**:
    *   Создайте интерактивную панель, позволяющую выбирать канал, тип метрики (CPA, CTR) и временной период для анализа.
    *   Реализуйте динамическое обновление графиков в зависимости от выбора пользователя.

### Этап 5. Заключение
На основе проведенного анализа:
1.  Подведите итоги по каждой проверенной гипотезе (подтверждена, опровергнута, частично подтверждена).
2.  Сформулируйте общие выводы о паттернах эффективности digital-кампаний и поведении пользователей.
3.  Дайте практические рекомендации для маркетинговой команды:
    *   По распределению бюджета между каналами с учетом их сезонности.
    *   По интерпретации данных атрибуции.
    *   По оптимизации путей пользователей для повышения конверсии.