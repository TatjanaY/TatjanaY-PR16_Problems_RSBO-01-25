# Анализ эффективности розничной сети и мерчандайзинга с использованием Python

## Цель задания
Провести полный цикл анализа данных розничной торговли, используя библиотеки **Python** (Pandas, Scikit-learn, Scipy, Matplotlib/Seaborn) для обработки данных, статистического анализа, кластеризации и визуализации. Задание фокусируется на оптимизации выкладки товаров, анализе покупательского поведения и сегментации магазинов.

## Набор данных
*   **Рекомендуемый подход**: Создание синтетического датасета, имитирующего данные о продажах, расположении товаров и покупательском трафике в розничной сети.
*   **Таблицы для генерации**:
    *   `sales_transactions`: TransactionID, DateTime, Store_ID, Product_ID, Quantity, Revenue.
    *   `store_layout`: Store_ID, Product_ID, Shelf_ID (ряд/полка), Shelf_Zone (зона: eye-level, hand-level, lower-level).
    *   `product_master`: Product_ID, Category, Subcategory, Brand, Cost_Price.
    *   `store_traffic`: Store_ID, Date, Hour, Customer_Count (сгенерировать).
*   **Описание**: Данные должны отражать работу сети магазинов (10-20 магазинов) в течение 6-12 месяцев с детализацией на уровне транзакций и расположения товара.

## Гипотезы для проверки
1.  Товары, расположенные на уровне глаз (`eye-level`), имеют статистически значимо более высокую оборачиваемость и маржинальность, чем товары на нижних полках.
2.  Паттерны совместных покупок различаются в зависимости от времени дня (утро/вечер) и дня недели (будни/выходные).
3.  Эффективность товара (продажи на единицу площади полки) коррелирует с интенсивностью покупательского трафика в соответствующей зоне магазина.
4.  Магазины можно эффективно кластеризовать по профилю покупательского поведения (средний чек, популярные категории, сезонность), что позволяет разработать для них дифференцированные стратегии.
5.  Существуют устойчивые комбинации товаров, которые стабильно покупаются вместе и могут быть использованы для перекрестных продаж.

## Этапы выполнения

### Этап 1. Создание синтетических данных и расчет метрик эффективности
**Требования**:
1.  Сгенерируйте реалистичный синтетический датасет:
    *   Используйте библиотеки `numpy`, `pandas` и, возможно, `Faker`.
    *   Имитируйте сезонность, различия между магазинами, эффект расположения товара (повышенные продажи на уровне глаз).
    *   Создайте данные о трафике, коррелированные со временем и типом магазина.
2.  Рассчитайте ключевые метрики:
    *   `Sales_per_Shelf_Unit`: Выручка от товара / условная площадь выкладки (можно использовать 1 для каждого товара или задать веса).
    *   `Gross_Margin_Rate`: (Revenue - Cost) / Revenue.
    *   `Inventory_Turnover`: Продажи в штуках за период / условный средний запас.
3.  Создайте категориальный признак `Shelf_Zone` на основе `Shelf_ID`.

### Этап 2. Разведочный анализ и проверка гипотез 1, 2, 3, 5
Для проверки гипотез сформируйте следующие визуализации с помощью **Matplotlib/Seaborn**. К каждому графику приложите краткий вывод.

| № гипотезы | Визуализация | Тип графика и библиотеки | Проверяемая гипотеза |
| :--- | :--- | :--- | :--- |
| 1 | Сравнение эффективности зон | **Диаграмма "ящик с усами":** Распределение `Sales_per_Shelf_Unit` для разных `Shelf_Zone`. Используйте Seaborn `boxplot`. Добавьте аннотации со средними значениями. | Влияние зоны полки на эффективность |
| 2 | Различия в паттернах покупок | **Тепловая карта (Heatmap):** Матрица корреляции популярности (частота покупок) категорий товаров для сегментов "Утренние будни" и "Вечерние выходные". Используйте Seaborn `heatmap`. | Различия в совместных покупках по времени |
| 3 | Связь продаж и трафика | **Диаграмма рассеяния с регрессией:** `Customer_Count` (в соответствующий час) vs `Sales_per_Shelf_Unit` для выборочных товаров. Используйте Seaborn `regplot`. | Корреляция эффективности с трафиком |
| 5 | Топ комбинаций товаров | **Горизонтальная столбчатая диаграмма:** Топ-10 пар товаров по частоте совместного появления в чеках. Используйте Matplotlib. | Устойчивые комбинации для перекрестных продаж |

### Этап 3. Статистическое тестирование и кластеризация (Гипотеза 4)
**Требования**:
1.  **Проверка гипотезы 1 (статистический тест)**:
    *   Сравните средние значения `Sales_per_Shelf_Unit` для групп `Shelf_Zone='eye-level'` и `Shelf_Zone='lower-level'`.
    *   Используйте t-критерий Стьюдента (`scipy.stats.ttest_ind`) или непараметрический U-критерий Манна-Уитни, если распределения не нормальны.
    *   Сделайте вывод о статистической значимости различий.
2.  **Кластеризация магазинов**:
    *   Агрегируйте данные на уровне магазина: средний чек, доля продаж по основным категориям, сезонность (разница между зимними и летними продажами).
    *   Стандартизируйте признаки.
    *   Примените алгоритм K-Means. Определите оптимальное число кластеров (3-4) с помощью метода локтя (`Elbow Method`) и анализа силуэтов.
    *   Проанализируйте и опишите кластеры (например, "Магазины с высоким средним чеком и премиальным ассортиментом", "Семейные магазины с большим объемом").
    *   Визуализируйте кластеры на диаграмме рассеяния с помощью PCA для уменьшения размерности.

### Этап 4. Создание комплексного аналитического отчета
Создайте структурированный отчет, объединяющий все этапы анализа.
*   Используйте Jupyter Notebook для последовательного выполнения всех шагов.
*   Организуйте отчет: цели и гипотезы, описание данных, визуализация с выводами, результаты статистических тестов и кластеризации, практические рекомендации.
*   **Расширенная задача**:
    *   Постройте простую линейную регрессионную модель для прогнозирования выручки товара на основе признаков: `Shelf_Zone`, `Category`, средняя цена, трафик в час пик.
    *   Проанализируйте значимость признаков в модели.

### Этап 5. Заключение
На основе проведенного анализа:
1.  Подведите итоги по каждой проверенной гипотезе.
2.  Сформулируйте общие выводы о ключевых факторах, влияющих на эффективность розничных продаж.
3.  Дайте практические рекомендации для отдела мерчандайзинга:
    *   По приоритетным зонам для выкладки ключевых товаров.
    *   По планированию совместных промо-акций на основе выявленных паттернов.
    *   По дифференцированным подходам к управлению ассортиментом в разных кластерах магазинов.