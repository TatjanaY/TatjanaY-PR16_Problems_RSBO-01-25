# Анализ музыкальных предпочтений и трендов на стриминговых платформах с использованием Python

## Цель задания
Провести полный цикл анализа данных стриминговых сервисов, используя библиотеки **Python** (Pandas, NumPy, Scikit-learn, Matplotlib/Seaborn, NLP-библиотеки) для обработки, анализа и визуализации. Задание фокусируется на выявлении музыкальных трендов, кластеризации аудитории и построении рекомендательных моделей.

## Набор данных
*   **Источники данных**: Используйте датасет **Spotify Tracks Dataset** или **Spotify Million Playlist Dataset** на Kaggle.
*   **Потенциальные источники**:
    *   **Основные данные**: Spotify Tracks Dataset (https://www.kaggle.com/datasets/mrmorj/spotify-tracks-dataset)
    *   **Дополнительные данные**: Spotify Audio Features API через spotipy (для расширения анализа)
*   **Структура данных**:
    *   `tracks_data`: Track_ID, Name, Artist, Album, Popularity, Duration, Release_Date
    *   `audio_features`: Track_ID, Danceability, Energy, Loudness, Speechiness, Acousticness, Instrumentalness, Liveness, Valence, Tempo, Key, Mode, Time_Signature
    *   `playlist_data`: Playlist_ID, Track_ID, User_ID (если доступно)
*   **Описание**: Данные содержат аудио-характеристики треков Spotify, информацию о популярности и метаданные о треках и артистах.

## Гипотезы для проверки
1.  Популярность треков имеет выраженную сезонную зависимость, причем разные музыкальные характеристики (например, энергия, танцевальность) преобладают в разные времена года.
2.  Аудио-характеристики треков (энергия, валентность) коррелируют с их коммерческим успехом (популярностью) в различных музыкальных жанрах.
3.  Треки можно эффективно сгруппировать в кластеры на основе их аудио-характеристик, и эти кластеры соответствуют интуитивным музыкальным категориям ("меланхоличные", "энергичные", "расслабляющие").
4.  Существуют устойчивые паттерны сочетания аудио-характеристик в популярных треках определенных периодов, отражающие музыкальные тренды эпохи.
5.  Танцевальность (danceability) и энергия (energy) треков имеют нелинейную зависимость от их темпа (tempo), причем оптимальные значения различаются для разных музыкальных жанров.

## Этапы выполнения

### Этап 1. Сбор и подготовка данных (ETL)
**Требования**:
1.  **Загрузка и очистка**:
    *   Загрузите основные таблицы датасета Spotify в `DataFrame` с помощью **Pandas**.
    *   Проведите базовую очистку: обработка пропусков в ключевых аудио-характеристиках, удаление дубликатов треков.
    *   Приведите данные о дате выпуска к единому формату и создайте признаки: год выпуска, месяц, сезон.
2.  **Расчет производных показателей**:
    *   Создайте категориальные признаки на основе числовых характеристик (например, уровень энергии: низкий/средний/высокий).
    *   Рассчитайте составные индексы: "позитивность" (на основе валентности и энергии), "сложность" (на основе инструментальности и речевого содержания).
    *   Нормализуйте аудио-характеристики для сравнительного анализа между треками.
3.  **Обогащение данных**:
    *   Сгруппируйте треки по артистам и жанрам (если данные о жанрах доступны).
    *   Создайте сводные таблицы на уровне артистов (средние характеристики их треков, общая популярность).

### Этап 2. Разведочный анализ и проверка гипотез 1, 2, 4, 5
Для проверки гипотез сформируйте следующие визуализации с помощью **Matplotlib/Seaborn**. К каждому графику приложите краткий вывод.

| № гипотезы | Анализ и визуализация | Метод и библиотеки | Проверяемая гипотеза |
| :--- | :--- | :--- | :--- |
| 1 | Сезонность музыкальных характеристик | **Ящик с усами:** Распределение значений "энергии" и "акустичности" треков, выпущенных в разные сезоны года. Seaborn `boxplot`. | Сезонные паттерны в музыке |
| 2 | Корреляция характеристик и популярности | **Диаграмма рассеяния с регрессией:** Значение "валентности" (X) vs. популярность трека (Y) для разных жанров. Seaborn `lmplot` с hue по жанру. | Связь настроения и успеха |
| 4 | Эволюция музыкальных трендов | **Многослойный линейный график:** Изменение средних значений ключевых аудио-характеристик (энергия, танцевальность) по годам выпуска. Matplotlib. | Исторические тренды в музыке |
| 5 | Взаимосвязь темпа и танцевальности | **Диаграмма рассеяния с цветовым кодированием:** Темп (BPM) vs. танцевальность, цвет точек — жанр. Добавьте нелинейную линию тренда. Seaborn `scatterplot`. | Нелинейные зависимости параметров |

### Этап 3. Кластеризация треков по аудио-характеристикам (Гипотеза 3)
**Требования**:
1.  Подготовьте данные для кластеризации:
    *   Выберите ключевые аудио-характеристики: танцевальность, энергия, валентность, акустичность, инструментальность.
    *   Создайте `DataFrame`, где строки — треки, столбцы — эти стандартизированные признаки.
    *   Обработайте выбросы в данных.
2.  Кластеризация:
    *   Стандартизируйте признаки с помощью `StandardScaler`.
    *   Примените алгоритм K-Means из `sklearn`.
    *   Определите оптимальное число кластеров (4-6) с помощью метода локтя (`Elbow Method`) и анализа силуэтов.
    *   Для сравнения примените алгоритм DBSCAN для выявления аномальных паттернов.
3.  Анализ и визуализация:
    *   Проанализируйте центры кластеров. Дайте им содержательные названия ("Энергичные танцевальные", "Меланхоличные акустические", "Сложные инструментальные").
    *   Визуализируйте результат на диаграмме рассеяния с использованием t-SNE для уменьшения размерности: цвет точек — кластер, размер — популярность трека.
    *   Проверьте, соответствует ли распределение жанров внутри кластеров вашей интерпретации.

### Этап 4. Создание комплексного аналитического отчета
Создайте структурированный отчет, объединяющий все этапы анализа.
*   Используйте Jupyter Notebook для последовательного выполнения всех шагов.
*   Организуйте отчет:
    *   **Введение и цели анализа**: Исследование музыкальных паттернов и трендов на основе данных Spotify.
    *   **Методология**: описание датасета, методов расчета аудио-характеристик и анализа.
    *   **Результаты**:
        *   Общая статистика музыкального каталога.
        *   Визуализация и выводы по гипотезам 1, 2, 4, 5.
        *   Результаты кластеризации (гипотеза 3) и профили музыкальных кластеров.
        *   Анализ наиболее успешных артистов с точки зрения аудио-характеристик.
    *   **Выводы и рекомендации**: Сводка по проверке гипотез, выводы о музыкальных трендах, практические рекомендации для музыкальных лейблов и артистов.
*   **Расширенная задача**:
    *   Создайте интерактивную панель с помощью `ipywidgets`, позволяющую выбирать музыкальный кластер и отображать топ-треков в нем, их характеристики и эволюцию во времени.
    *   Реализуйте простую рекомендательную систему на основе косинусного сходства аудио-характеристик.
    *   Сгенерируйте PDF-отчет из ноутбука с помощью `nbconvert`.

### Этап 5. Заключение
На основе проведенного анализа:
1.  Подведите итоги по каждой проверенной гипотезе (подтверждена, опровергнута, частично подтверждена).
2.  Сформулируйте общие выводы о структуре музыкальных предпочтений, эволюции трендов и взаимосвязях аудио-характеристик.
3.  Дайте практические рекомендации для музыкальной индустрии:
    *   Для A&R-менеджеров: какие аудио-характеристики ассоциируются с коммерческим успехом в разных жанрах.
    *   Для артистов и продюсеров: как понимание аудио-паттернов может помочь в творческом процессе.
    *   Для стриминговых сервисов: как использовать кластеризацию для улучшения рекомендательных систем и плейлистов.
    *   Для маркетологов: как учитывать сезонные паттерны при планировании релизов и промо-кампаний.