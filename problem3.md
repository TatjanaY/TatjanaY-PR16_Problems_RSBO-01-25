# Анализ рыночных данных для электронной коммерции с использованием Pandas и Matplotlib

## Цель задания
Провести полный цикл анализа данных розничных продаж с использованием библиотек **Pandas** (для обработки данных) и **Matplotlib** (для визуализации). Задание фокусируется на исследовании рыночных показателей, сезонности и прибыльности без применения машинного обучения или дополнительного программного обеспечения.

## Набор данных
*   **Источник**: Superstore Sales Dataset (Retail) на Kaggle
*   **Файл**: `superstore_dataset.csv`
*   **Описание**: Данные содержат информацию о транзакциях, клиентах, продуктах и географии розничной сети.

## Гипотезы для проверки
1.  Прибыльность (`Profit`) заказа имеет сезонную составляющую и зависит от категории товара (`Category`).
2.  Время доставки (`Ship Date - Order Date`) коррелирует с размером предоставляемой скидки (`Discount`).
3.  Средний чек различается по регионам (`Region`) и категориям товаров.
4.  Существуют специфические сочетания категории товара (`Category`) и способа доставки (`Ship Mode`), которые являются убыточными.
5.  Основная часть прибыли генерируется небольшим процентом товарных подкатегорий (`Sub-Category`).

## Этапы выполнения

### Этап 1. Загрузка, проверка и предобработка данных (ETL)
**Требования**:
1.  Загрузите датасет `superstore_dataset.csv` в `DataFrame` с помощью **Pandas**.
2.  Проверьте структуру и типы данных, уделив особое внимание преобразованию полей с датами (`Order Date`, `Ship Date`) в тип `datetime`.
3.  Проведите базовую проверку целостности данных:
    *   Рассчитайте и зафиксируйте долю пропущенных значений для всех полей.
    *   Выявите и удалите явные дубликаты записей (полностью идентичные строки).
    *   Проверьте логическую согласованность: убедитесь, что `Ship Date` не раньше `Order Date`. Скорректируйте или удалите аномальные записи.
4.  Создайте производные признаки:
    *   `Delivery_Days`: целое число дней между датой отгрузки (`Ship Date`) и датой заказа (`Order Date`).
    *   `Order_Year_Month`: признак для агрегации по периодам (например, в формате `YYYY-MM`).
    *   `IsProfitNegative`: бинарный признак (`1` для убыточного заказа, где `Profit < 0`).

### Этап 2. Разведочный анализ данных (EDA) и проверка гипотез
Для проверки гипотез сформируйте следующие визуализации с помощью **Matplotlib**. К каждому графику приложите краткий вывод о подтверждении или опровержении гипотезы.

| № гипотезы | Визуализация | Тип графика | Проверяемая гипотеза |
| :--- | :--- | :--- | :--- |
| 1 | Динамика средней прибыли (`Profit`) по месяцам с разбивкой по категориям товаров (`Category`) | Линейный график с несколькими линиями (по одной на категорию) | Прибыльность имеет сезонность и зависит от категории товара |
| 2 | Зависимость величины скидки (`Discount`) от времени доставки (`Delivery_Days`) | Диаграмма рассеяния (Scatter Plot) с группировкой по цвету точек в зависимости от `Category` | Время доставки коррелирует с размером скидки |
| 3 | Средний чек (рассчитывается как `Sales` / количество заказов) по регионам и категориям | Сгруппированная столбчатая диаграмма (Grouped Bar Chart) | Средний чек различается по регионам и категориям |
| 4 | Средняя прибыльность для комбинаций категорий товаров (`Category`) и способов доставки (`Ship Mode`) | Тепловая карта (Heatmap) | Существуют убыточные комбинации `Category` и `Ship Mode` |
| 5 | Кумулятивная доля общей прибыли, генерируемая товарными подкатегориями (`Sub-Category`), отсортированными по убыванию вклада | Диаграмма Парето (столбчатая диаграмма с линией кумулятивного процента) | Основная прибыль генерируется небольшим процентом подкатегорий |

### Этап 3. Создание единого отчета
Создайте итоговый отчет, объединив ключевые визуализации и выводы. Для этого:
*   Используйте функцию `plt.subplots()` для создания многоуровневой фигуры с компоновкой графиков из Этапа 2.
*   Организуйте графики в логической последовательности, соответствующей проверяемым гипотезам.
*   Добавьте общее название отчета и подписи к каждому графику.

### Этап 4. Заключение
На основе проведенного анализа и построенных визуализаций:
1.  Подведите итоги по каждой проверенной гипотезе (подтверждена, опровергнута, частично подтверждена).
2.  Сформулируйте общие выводы о ключевых факторах прибыльности и особенностях спроса в розничной сети.
3.  Дайте практические рекомендации на основе выявленных закономерностей (например, по оптимизации ассортимента или логистики).